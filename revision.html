<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Learn AI | Machine Learning Quiz</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>

<style>
body { font-family: Arial, sans-serif; background: #f5fff5; margin:0; padding:0; color:#222; }
header { background:#2e7d32; color:white; padding:15px 20px; display:flex; justify-content:space-between; align-items:center; }
header h1 { margin:0; font-size:22px; }
.container { max-width:900px; margin:40px auto; background:white; padding:30px; border-radius:10px; box-shadow:0 0 15px rgba(0,0,0,0.1);}
h2,h3 { color:#2e7d32; text-align:center;}
p { text-align:center; color:#444;}
.question { margin-bottom:20px; padding:15px; background:#f3faf3; border-left:5px solid #2e7d32; border-radius:8px;}
label { display:block; margin:6px 0; cursor:pointer;}
input[type="radio"] { margin-right:8px; accent-color:#2e7d32;}
button { background:#2e7d32; color:white; border:none; padding:12px 25px; border-radius:8px; font-weight:bold; cursor:pointer; display:block; margin:25px auto 0;}
button:hover { background:#1b5e20;}
.result-box { display:none; margin-top:30px; background:#e8f5e9; padding:20px; border-radius:8px; border-left:5px solid #2e7d32; text-align:left;}
.result-box h3, .result-box p { text-align:center; }
.feedback { margin-top:15px; padding:10px; border-top:1px solid #ccc; text-align:center; font-style:italic;}
.correct { background-color:#e6ffe6; padding:8px; margin-bottom:10px; border-radius:4px; border-left:3px solid #00c853; }
.incorrect { background-color:#ffe6e6; padding:8px; margin-bottom:10px; border-radius:4px; border-left:3px solid #d50000; }
textarea,input[type="file"] { width:100%; border:1px solid #ccc; border-radius:6px; padding:10px; margin-bottom:15px; font-size:14px; background:#fff;}
canvas { border:2px dashed #ccc; display:block; margin:10px auto; width:100%; max-width:700px; height:300px; background:#fafafa; cursor:crosshair;}
footer { text-align:center; color:#555; margin-top:60px; font-size:13px; padding-bottom:30px;}
.whatsapp-float { position:fixed; width:60px; height:60px; bottom:25px; right:25px; background-color:#25D366; color:white; border-radius:50%; text-align:center; font-size:28px; line-height:60px; box-shadow:2px 2px 10px rgba(0,0,0,0.3); cursor:pointer;}
.whatsapp-float:hover { background-color:#20b358;}
</style>
</head>
<body>

<header>
<h1>Learn AI | Tests & Assignments</h1>
</header>

<div class="container">
<h2>Machine Learning Quiz: 10 Questions</h2>
<p>Select your answers and submit to see your score and personalized advice.</p>

<form id="quizForm"></form>
<button type="button" onclick="gradeQuiz()">Submit Answers</button>
<div class="result-box" id="resultBox"></div>

<div class="assignment-section">
<h3>üßë‚Äçüíª Write Your Route Code</h3>
<textarea id="codeEditor"># Write your Flask/Python route code here</textarea>
<button type="button" onclick="saveCode()">üíæ Save Code</button>
<p id="saveMessage" style="text-align:center; color:#1b5e20; display:none;">‚úÖ Code saved locally!</p>
</div>

<div class="assignment-section">
<h3>üìà Draw Your Model Architecture</h3>
<canvas id="modelCanvas"></canvas>
<button type="button" onclick="clearCanvas()">üßπ Clear Drawing</button>
</div>

<div class="assignment-section">
<h3>üì§ Upload Assignment</h3>
<input type="file" id="assignmentFile" accept=".ipynb,.pdf,.docx,.zip" />
<textarea id="assignmentComment" rows="3" placeholder="Describe your assignment..."></textarea>
<button type="button" onclick="uploadAssignment()">Submit Assignment</button>
<p id="uploadSuccess" style="display:none; color:#1b5e20; text-align:center;">‚úÖ Assignment uploaded successfully!</p>
</div>
</div>

<a href="https://wa.me/254707605751" class="whatsapp-float" target="_blank">üí¨</a>
<footer>¬© 2025 LearnAI | Empowering Future Innovators</footer>

<script>
// Quiz Questions (Modified for Machine Learning)
const questionBank = [
    {q:"What is the primary goal of an Unsupervised Learning algorithm?", options:["Predicting a continuous output","Classifying data into predefined labels","Discovering hidden patterns and structures in unlabeled data","Training a model with labeled data only"], ans:"c"},
    {q:"Which of the following is an example of a Supervised Learning task?", options:["Clustering customer demographics","Anomaly detection in network traffic","Predicting house prices","Reducing the dimensionality of a dataset"], ans:"c"},
    {q:"What does the 'K' represent in the K-Nearest Neighbors (KNN) algorithm?", options:["The number of features","The number of classes","The number of neighbors to consider","The number of training samples"], ans:"c"},
    {q:"In Machine Learning, what is the 'Loss Function' used for?", options:["To speed up the training process","To measure the difference between the predicted and actual values","To visualize the dataset distribution","To generate new synthetic data"], ans:"b"},
    {q:"What technique is used to prevent **overfitting** in a Neural Network?", options:["Increasing the number of layers","Decreasing the size of the dataset","Using a high learning rate","**Dropout**"], ans:"d"},
    {q:"Which term describes the process of converting categorical data into numerical data for an ML model?", options:["Normalization","Standardization","**One-Hot Encoding**","Feature Scaling"], ans:"c"},
    {q:"What is a **Hyperparameter**?", options:["A parameter learned by the model during training","A data point with extreme values","A parameter whose value is set before the learning process begins","The final output of a prediction model"], ans:"c"},
    {q:"Which metric is most suitable for evaluating a model on an imbalanced classification dataset?", options:["Accuracy","**F1-Score**","Mean Squared Error (MSE)","R-squared"], ans:"b"},
    {q:"The acronym **RNN** stands for what type of Neural Network, typically used for sequential data?", options:["Random Neural Network","Residual Nodal Network","**Recurrent Neural Network**","Replicated Normal Network"], ans:"c"},
    {q:"In Linear Regression, what is the primary purpose of the **Gradient Descent** algorithm?", options:["To initialize the model's weights randomly","To calculate the prediction error","To find the minimum of the cost function","To visualize the linear relationship"], ans:"c"}
];

// Utility to get the option text from its value (a, b, c, d)
function getOptionText(qIndex, ansValue) {
    const q = questionBank[qIndex];
    const index = ["a", "b", "c", "d"].indexOf(ansValue);
    return q.options[index];
}

// Display questions
function generateQuestions(){
    const form = document.getElementById("quizForm");
    form.innerHTML = questionBank.map((q,i)=>`
        <div class='question' id='q-box-${i}'>
            <h4>${i+1}. ${q.q}</h4>
            ${["a","b","c","d"].map((opt,j)=>`
                <label>
                    <input type="radio" name="q${i}" value="${["a","b","c","d"][j]}">
                    ${["a","b","c","d"][j]}. ${q.options[j]}
                </label>
            `).join("")}
        </div>
    `).join("");
}

// Speak Function (Web Speech API)
function speakAdvice(text) {
    if (!('speechSynthesis' in window)) {
        console.warn("Speech Synthesis API not supported.");
        return;
    }
    
    // Stop any current speech
    window.speechSynthesis.cancel(); 
    
    const utterance = new SpeechSynthesisUtterance(text);
    
    // Try to find a female voice
    const voices = window.speechSynthesis.getVoices();
    let ladyVoice = voices.find(voice => voice.name.includes('Google US English') || voice.lang.includes('en-US') && (voice.name.includes('Female') || voice.name.includes('Lady')));
    
    // Fallback to a default voice if a specific lady voice isn't found
    if (!ladyVoice) {
        ladyVoice = voices.find(voice => voice.default);
    }
    
    if (ladyVoice) {
        utterance.voice = ladyVoice;
    }
    
    // Set parameters
    utterance.rate = 1.0;
    utterance.pitch = 1.0;

    window.speechSynthesis.speak(utterance);
}

// Grade Quiz - MODIFIED to show correct/incorrect and provide advice
function gradeQuiz(){
    let score = 0;
    let resultsHTML = "<h3>Results</h3>";
    const totalQuestions = questionBank.length;
    let adviceText = "";

    questionBank.forEach((q, i) => {
        const selectedRadio = document.querySelector(`input[name=q${i}]:checked`);
        const selectedValue = selectedRadio ? selectedRadio.value : null;
        const correctAnsText = getOptionText(i, q.ans);
        
        const isCorrect = selectedValue === q.ans;
        
        if (isCorrect) {
            score++;
            resultsHTML += `<div class="correct">‚úÖ **Correct!** (${i+1}) ${q.q}<br>Your Answer: ${correctAnsText}</div>`;
        } else {
            const userAnsText = selectedValue ? getOptionText(i, selectedValue) : "No Answer Selected";
            resultsHTML += `<div class="incorrect">‚ùå **Incorrect!** (${i+1}) ${q.q}<br>Your Answer: ${userAnsText}<br>Correct Answer: **${q.ans}. ${correctAnsText}**</div>`;
        }

        // Disable all radio buttons after submission
        document.querySelectorAll(`input[name=q${i}]`).forEach(radio => radio.disabled = true);
    });

    const percent = Math.round((score / totalQuestions) * 100);
    const resultBox = document.getElementById("resultBox");
    
    // Determine advice
    if (percent >= 80) {
        adviceText = `Congratulations! You scored ${percent} percent. That's an excellent result! Keep reinforcing your knowledge, and consider tackling more advanced topics like Deep Learning architectures and M.L. Ops.`;
    } else if (percent >= 50) {
        adviceText = `Well done! You scored ${percent} percent. That's a good foundation! To improve, focus on the core concepts you missed, especially the differences between supervised and unsupervised learning, and the purpose of various metrics.`;
    } else {
        adviceText = `Your score is ${percent} percent. Don't be discouraged! Machine Learning has a steep learning curve. Review the basics of algorithms like K-N N, Decision Trees, and the fundamentals of Neural Networks. Practice with hands-on projects to solidify your understanding. You've got this!`;
    }
    
    // Update the result box with score and advice
    resultsHTML = `<h3>Results</h3><p>Score: **${score}/${totalQuestions}** (**${percent}**%)</p>` + resultsHTML;
    resultsHTML += `<div class="feedback">${adviceText}</div>`;
    
    resultBox.innerHTML = resultsHTML;
    resultBox.style.display = "block";

    // Speak the advice automatically
    speakAdvice(adviceText);
}

// CODE EDITOR
const editor = CodeMirror.fromTextArea(document.getElementById("codeEditor"), { lineNumbers:true, mode:"python", theme:"default"});
function saveCode(){ localStorage.setItem("studentCode", editor.getValue()); document.getElementById("saveMessage").style.display="block"; setTimeout(()=>document.getElementById("saveMessage").style.display="none",2000); }

// CANVAS
const canvas=document.getElementById("modelCanvas"); const ctx=canvas.getContext("2d"); let drawing=false;
canvas.addEventListener("mousedown",()=>drawing=true); canvas.addEventListener("mouseup",()=>drawing=false);
canvas.addEventListener("mousemove", e=>{ if(!drawing) return; const rect=canvas.getBoundingClientRect(); ctx.fillStyle="#2e7d32"; ctx.beginPath(); ctx.arc(e.clientX-rect.left,e.clientY-rect.top,3,0,Math.PI*2); ctx.fill(); });
function clearCanvas(){ ctx.clearRect(0,0,canvas.width,canvas.height); }

// Assignment upload
function uploadAssignment(){
    const file=document.getElementById("assignmentFile").files[0];
    if(!file) return alert("Please select a file to upload.");
    document.getElementById("uploadSuccess").style.display="block";
    document.getElementById("uploadSuccess").innerHTML=`‚úÖ Assignment uploaded successfully!<br>File: <strong>${file.name}</strong>`;
}

// Initialize
// Wait for voices to be loaded before calling generateQuestions, just in case
window.speechSynthesis.onvoiceschanged = () => {
    generateQuestions();
};
if (window.speechSynthesis.getVoices().length > 0) {
    generateQuestions();
}
</script>
</body>
</html>